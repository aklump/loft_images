/**
 * Loft Images JavaScript Module v1.3.17
 * http://www.intheloftstudios.com/packages/js/loft_images
 *
 * Front end Retina and SVG Handling for img tags or background images.
 *
 * Copyright 2015-2016, Aaron Klump <sourcecode@intheloftstudios.com>
 * @license Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: Wed Jul 20 17:35:27 PDT 2016
 */
var LoftImages=function($,t){function e(t){this.version="1.3.17","string"==typeof t&&(t={classBase:t}),this.settings={},$.extend(this.settings,this.options,t),this.settings.autoInit&&this.init(),this.settings.autoProcessDom&&this.processDom()}function s(t){t.pending--,t.processed++,t.pending<1&&(delete t.pending,$.event.trigger("loftImagesDomReady",t))}return e.prototype.options={dataSvgAttribute:"no-svg-src",dataRetinaAttribute:"no-retina-src",retinaSuffix:"@2x",retinaMediaQuery:"(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)",context:t,classRootSelector:"html",autoInit:!0,autoProcessDom:!0,onceClass:"loft-images",retinaClassOnRoot:"retina",noRetinaClassOnRoot:"no-retina",svgClassOnRoot:"svgasimg",noSvgClassOnRoot:"no-svgasimg"},e.prototype.init=function(){var t=this;return t.svg=t.isSvg(),t.retina=t.isRetina(),this},e.prototype.processDom=function(){var e=this,n=e.settings,i=n.noRetinaClassOnRoot;e.retina&&(i=n.retinaClassOnRoot),i+=e.svg?" "+n.svgClassOnRoot:" "+n.noSvgClassOnRoot,$(n.classRootSelector).removeClass([n.retinaClassOnRoot,n.noRetinaClassOnRoot,n.svgClassOnRoot,n.noSvgClassOnRoot].join(" ")).addClass(i);var o=$(e.settings.context?e.settings.context:t);e.pending=0;var a=o.find("*[data-"+n.dataSvgAttribute+"]:not(."+n.onceClass+")");e.pending+=a.length;var r=o.find("*[data-"+n.dataRetinaAttribute+"]:not(."+n.onceClass+")");return e.pending+=r.length,e.processed=0,a.addClass(n.onceClass+"-processed").each(function(){e.processSvgImage(this)}),r.addClass(n.onceClass+"-processed").each(function(){e.processRetinaImage(this)}),e.pending<1&&s(e),e},e.prototype.processSvgImage=function(t){t=t instanceof jQuery?t:$(t);var e=t.data(this.settings.dataSvgAttribute),n;return e&&(this.svg&&(n=e.match(/(.+)(\..+$)/))&&(e=n[1]+".svg"),this.applySource(t,e)),s(this),this},e.prototype.processRetinaImage=function(t){t=t instanceof jQuery?t:$(t);var e=t.data(this.settings.dataRetinaAttribute),n;return e&&(this.retina&&(n=e.match(/(.+)(\..+$)/))&&(e=n[1]+this.settings.retinaSuffix+n[2]),this.applySource(t,e)),s(this),this},e.prototype.applySource=function(t,e){t=t instanceof jQuery?t.get(0):t;var s=t.nodeName.toLowerCase();"img"===s?$(t).attr("src",e):$(t).css("backgroundImage","url("+e+")")},e.prototype.isRetina=function(){return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(this.settings.mediaQuery).matches?!0:!1},e.prototype.isSvg=function(){return"undefined"!=typeof Modernizr&&"undefined"!=typeof Modernizr.svgasimg?Modernizr.svgasimg:t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},e}(jQuery,document);